---
import type { HTMLAttributes } from "astro/types";
import { tv } from "tailwind-variants";

type Props = HTMLAttributes<"div"> & {
  /**
   * When true, the component will render its child element with a simple wrapper instead of a div component
   */
  asChild?: boolean;
};

export const buttonGroupText = tv({
  base: [
    "bg-muted flex items-center gap-2 rounded-md border px-4 text-sm font-medium shadow-xs",
    "[&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4",
  ],
});

const { class: className, asChild = false, ...rest } = Astro.props;

// Check if there are children for asChild mode
let hasChildren = false;
if (Astro.slots.has("default")) {
  hasChildren = true;
}
---

{
  asChild && hasChildren ? (
    <slot />
  ) : (
    <div class:list={[buttonGroupText(), className]} data-slot="button-group-text" {...rest}>
      <slot />
    </div>
  )
}
